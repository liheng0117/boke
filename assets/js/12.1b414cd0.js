(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{522:function(s,n,a){s.exports=a.p+"assets/img/1.39f2bb1e.jpg"},523:function(s,n,a){s.exports=a.p+"assets/img/2.3ba60378.jpg"},524:function(s,n,a){s.exports=a.p+"assets/img/3.048ab7a8.jpg"},561:function(s,n,a){"use strict";a.r(n);var t=a(7),e=Object(t.a)({},(function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[s._v("#")]),s._v(" 介绍")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"title"}),t("p",[s._v("Koa 是一个新的 web 框架，由 Express 幕后的原班人马打造， 致力于成为 web 应用和 API 开发领域中的一个更小、更富有表现力、更健壮的基石。 通过利用 async 函数，Koa 帮你丢弃回调函数，并有力地增强错误处理。 Koa 并没有捆绑任何中间件， 而是提供了一套优雅的方法，帮助您快速而愉快地编写服务端应用程序。")])]),t("h2",{attrs:{id:"一、koa2安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、koa2安装"}},[s._v("#")]),s._v(" 一、Koa2安装")]),s._v(" "),t("p",[s._v("创建一个空白目录，然后进入终端，并在终端对koa进行安装：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 项目初始化\nnpm init -y\n\n# 安装koa2\nnpm i koa2 -S\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h2",{attrs:{id:"二、入口文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、入口文件"}},[s._v("#")]),s._v(" 二、入口文件")]),s._v(" "),t("p",[s._v("在项目根目录创建 app.js 文件，并在上一步操作中生成的 package.json 里配置：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('{\n  "scripts": {\n    "test": "echo \\"Error: no test specified\\" && exit 1",\n    "start": "node app.js"\n  },\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("在 app.js 中：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("const Koa = require('koa2');\nconst app = new Koa();\nconst port = 9000;\n\n/* \n  解释下面这段代码：\n  app.use()方法是：将给定的中间件方法添加到此应用程序。简单说就是调用中间件\n  app.use() 返回 this, 因此可以链式表达\n*/\napp.use(async (ctx)=>{\n    ctx.body = \"Hello, Koa\";\n    // ctx.body是ctx.response.body的简写\n})\n\napp.listen(port, ()=>{\n    console.log('Server is running at http://localhost:'+port);\n})\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("p",[s._v("然后运行 npm start ，并在浏览器输入 http://localhost:9000/ 即可看到页面效果。")]),s._v(" "),t("h2",{attrs:{id:"三、洋葱模型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、洋葱模型"}},[s._v("#")]),s._v(" 三、洋葱模型")]),s._v(" "),t("p",[s._v("学Koa必须要了解 洋葱模型 :")]),s._v(" "),t("p",[t("img",{attrs:{src:a(522),alt:""}})]),s._v(" "),t("p",[s._v("Koa 和 Express 都会使用到中间件，Express的中间件是顺序执行，从第一个中间件执行到最后一个中间件，发出响应：")]),s._v(" "),t("p",[t("img",{attrs:{src:a(523),alt:""}})]),s._v(" "),t("p",[s._v("Koa是从第一个中间件开始执行，遇到 next 进入下一个中间件，一直执行到最后一个中间件，在逆序，执行上一个中间件 next 之后的代码，一直到第一个中间件执行结束才发出响应。")]),s._v(" "),t("p",[t("img",{attrs:{src:a(524),alt:""}})]),s._v(" "),t("p",[s._v("对于这个洋葱模型，我们用代码来解释一下。假如把上面的代码改写成：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("const Koa = require('koa2');\nconst app = new Koa();\nconst port = 9000;\n\napp.use(async (ctx, next)=>{\n    console.log(1)\n    await next();\n    console.log(1)\n})\n\napp.use(async (ctx, next)=>{\n    console.log(2)\n    await next();\n    console.log(2)\n})\n\napp.use(async (ctx)=>{\n    console.log(3)\n})\n\napp.listen(port, ()=>{\n    console.log('Server is running at http://localhost:'+port);\n})\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("p",[s._v("那么在浏览器刷新后，控制台得到的顺序是：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("1\n2\n3\n2\n1\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("现在可以看到，我们通过 next可以先运行下个中间件，等中间件结束后，再继续运行当前 next() 之后的代码。")]),s._v(" "),t("h2",{attrs:{id:"四、路由安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四、路由安装"}},[s._v("#")]),s._v(" 四、路由安装")]),s._v(" "),t("p",[s._v("当需要匹配不同路由时，可以安装")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("npm i koa-router\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("将 app.js 修改：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("const Koa = require('koa2');\nconst Router = require('koa-router');\nconst app = new Koa();\nconst router = new Router();\nconst port = 9000;\n\nrouter.get('/', async (ctx)=>{\n    ctx.body = \"首页\";\n})\n\nrouter.get('/list', async (ctx)=>{\n    ctx.body = \"列表页\";\n})\n\n\napp.use(router.routes(), router.allowedMethods());\n\napp.listen(port, ()=>{\n    console.log('Server is running at http://localhost:'+port);\n})\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br")])]),t("p",[s._v("此时，到浏览器刷新并在地址栏最后添加 /list 即可得到首页和列表页。")]),s._v(" "),t("p",[s._v("备注：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("// 调用router.routes()来组装匹配好的路由，返回一个合并好的中间件\n// 调用router.allowedMethods()获得一个中间件，当发送了不符合的请求时，会返回 `405 Method Not Allowed` 或 `501 Not Implemented`\n\nallowedMethods方法可以做以下配置：\napp.use(router.allowedMethods({ \n    // throw: true, // 抛出错误，代替设置响应头状态\n    // notImplemented: () => '不支持当前请求所需要的功能',\n    // methodNotAllowed: () => '不支持的请求方式'\n}))\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h2",{attrs:{id:"五、路由拆分"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#五、路由拆分"}},[s._v("#")]),s._v(" 五、路由拆分")]),s._v(" "),t("p",[s._v("有时候我们需要拆分路由，比如：\n列表页下所有的子路由（即前端请求的api）与首页所有的子路由想分开处理，那么就需要拆分路由。")]),s._v(" "),t("h3",{attrs:{id:"_1、创建-router-文件夹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、创建-router-文件夹"}},[s._v("#")]),s._v(" 1、创建 router 文件夹")]),s._v(" "),t("p",[s._v("创建router文件夹，并在其中创建：index.js （路由总入口文件）、home.js （首页总路由文件）、list.js （列表页总路由文件）：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# app.js\nconst router = require('./router/index')\napp.use(router.routes(), router.allowedMethods());\n\n# index.js\nconst Router = require('koa-router');\nconst router = new Router();\nconst home = require('./home')\nconst list = require('./list')\n\nrouter.use('/home', home.routes(), home.allowedMethods());\nrouter.use('/list', list.routes(), list.allowedMethods());\n\nmodule.exports = router;\n\n\n# home.js\nconst Router = require('koa-router');\nconst home = new Router();\n\n// 这里的 '/' 就是指向 index.js 中的 /home\nhome.get('/', async (ctx) => {\n        ctx.body = \"首页\";\n    })\n\nmodule.exports = home;\n\n\n# list.js\nconst Router = require('koa-router');\nconst list = new Router();\n\nlist.get('/', async (ctx)=>{\n    ctx.body = \"列表页\";\n})\n\nmodule.exports = list;\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br")])]),t("p",[s._v("到浏览器刷新 localhost:9000/home 与 localhost:9000/list 即可得到首页与列表页。")]),s._v(" "),t("h3",{attrs:{id:"_2、路由重定向"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、路由重定向"}},[s._v("#")]),s._v(" 2、路由重定向")]),s._v(" "),t("p",[s._v("如果想直接从 localhost:9000 重定向到 localhost:9000/home"),t("br"),s._v("\n可以在 router/index.js 中做如下配置：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("router.use('/home', home.routes(), home.allowedMethods());\n...\nrouter.redirect('/', '/home');\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"_3、404无效路由"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、404无效路由"}},[s._v("#")]),s._v(" 3、404无效路由")]),s._v(" "),t("p",[s._v("如果被访问到无效路由，可以统一返回404页面：")]),s._v(" "),t("p",[s._v("在 router 下 errorPage.js :")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("const Router = require('koa-router');\nconst errorPage = new Router();\n\nerrorPage.get('/', async (ctx) => {\n    ctx.body = \"访问页面不存在\";\n})\n\nmodule.exports = errorPage;\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("在 app.js 中引用：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('// 匹配不到页面的全部跳转去404\napp.use(async (ctx, next) => {\n    await next();\n    if (parseInt(ctx.status) === 404) {\n        ctx.response.redirect("/404")\n    }\n})\napp.use(router.routes(), router.allowedMethods());\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h2",{attrs:{id:"六、统一异常处理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#六、统一异常处理"}},[s._v("#")]),s._v(" 六、统一异常处理")]),s._v(" "),t("p",[s._v("避免每次都要自己手写404或200进行返回，因此我们可以创建 utils/errorHandler.js ：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('// 统一异常处理\nmodule.exports = (app) => {\n    app.use(async (ctx, next) => {\n        let status = 0;\n        let fileName = "";\n        try{\n            await next();\n            status = ctx.status;\n        }catch(err){\n            //console.log(err);\n            status = 500;\n        }\n        if(status >= 400){\n            switch(status){\n                case 400:\n                case 404:\n                case 500:\n                    fileName = status;\n                    break;\n                default:\n                    fileName = "other";\n                    break;\n            }\n        }\n        ctx.response.status = status;\n        console.log(fileName);\n    });\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br")])]),t("p",[s._v("然后在 app.js 中引入：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("const errorHandler = require('./utils/errorHandler.js');\n\napp.use(router.routes(), router.allowedMethods());\n...\nerrorHandler(app);\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h2",{attrs:{id:"七、操作mysql函数封装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#七、操作mysql函数封装"}},[s._v("#")]),s._v(" 七、操作mysql函数封装")]),s._v(" "),t("p",[s._v("首先，项目内安装 mysql：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yarn add mysql\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在 utils 目录下创建一个 db.js 文件：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("var mysql = require('mysql')\n\nvar pool = mysql.createPool({\n    host: 'localhost', // 连接的服务器(代码托管到线上后，需改为内网IP，而非外网)\n    port: 3306, // mysql服务运行的端口\n    database: 'xxx', // 选择的库\n    user: 'root', // 用户名\n    password: '123456' // 用户密码   \n})\n\n//对数据库进行增删改查操作的基础\nfunction query(sql,callback){\n    pool.getConnection(function(err,connection){\n        connection.query(sql, function (err,rows) {\n            callback(err,rows)\n            connection.release()\n        })\n    })\n}\n\nexports.query = query;\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br")])]),t("p",[s._v("调用方式：")]),s._v(" "),t("p",[s._v("假设要访问首页('/home')时，要查询表users中所有的数据，可以如下操作：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("const db = require('../utils/db.js');\n\nhome\n  // 页面底部外链\n  .get('/', async (ctx) => {\n    let data = await new Promise((resolve, reject)=>{\n      let sqlLang = `select * from users`;\n      db.query(sqlLang, (err, data)=>{\n        if(err) reject(err);\n        resolve(data);\t// 返回拿到的数据\n      })\n    })\n    ctx.body = data;\n  })\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("h2",{attrs:{id:"八、后端允许跨域"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#八、后端允许跨域"}},[s._v("#")]),s._v(" 八、后端允许跨域")]),s._v(" "),t("p",[s._v("前端想跨域，可以设置proxy。如果后端允许跨域，可以如下操作：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("// 安装koa2-cors\ncnpm i koa2-cors\n\n// 这里cors中间件一定要写在路由之前\napp.use(cors());\napp.use(router.routes(), router.allowedMethods())\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"九、读取静态资源文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#九、读取静态资源文件"}},[s._v("#")]),s._v(" 九、读取静态资源文件")]),s._v(" "),t("p",[s._v("首先，在项目的根目录下创建 assets 后，将图片资源文件夹 images 放到其中，并且执行以下操作：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("// 安装koa-static\ncnpm install koa-static\n\n// 引入\nconst path = require('path')\nconst static = require('koa-static')\n\n// 获取静态资源文件夹\napp.use(static(path.join(__dirname+'/assets')));\n...\napp.use(router.routes(), router.allowedMethods())\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("假设其中有一张图片叫做 banner1.png，那么我们打开浏览器，访问：http://localhost:5050/images/banner1.png 即可得到图片。这里注意：")]),s._v(" "),t("p",[s._v("路径上不需要写assets，因为我们已经指定了访问资源时， http://localhost:5050 自动指向 assets 文件夹。")]),s._v(" "),t("p",[s._v("由此，我们知道数据库中图片的地址只需要填写 /images/banner1.png 即可。")]),s._v(" "),t("h2",{attrs:{id:"十、post请求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#十、post请求"}},[s._v("#")]),s._v(" 十、POST请求")]),s._v(" "),t("h3",{attrs:{id:"_1、建表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、建表"}},[s._v("#")]),s._v(" 1、建表")]),s._v(" "),t("p",[s._v("设定字段为account和pwd")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("create table users (\n\tid INT NOT NULL PRIMARY KEY AUTO_INCREMENT,\n\taccount VARCHAR(20) NOT NULL COMMENT '账号',\n\tpwd VARCHAR(20) NOT NULL COMMENT '密码',\n  token LONGTEXT NOT NULL COMMENT '令牌'\n);\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"_2、form表单页面"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、form表单页面"}},[s._v("#")]),s._v(" 2、form表单页面")]),s._v(" "),t("p",[s._v("在 assets 下创建 index.html ：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Document</title>\n</head>\n<body>\n    <label for="account">账号</label>\n    <input type="text" value="" name="account" class="account" placeholder="请输入账号" />\n    <br><br>\n    <label for="pwd">密码</label>\n    <input type="password" value="" name="pwd" class="pwd" placeholder="请输入密码" />\n    <br><br>\n    <button class="btn">登录/注册</button>\n</body>\n</html>\n<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"><\/script>\n<script>\n    $(\'.btn\').click(()=>{\n        $.ajax({\n            url: "/login/register",\n            method: "POST",\n            data: {\n                account: $(\'.account\').val(),\n                pwd: $(\'.pwd\').val()\n            },\n            success(res){\n                console.log(res)\n            },\n            error(err){\n                console.log(err)\n            }\n        })\n    })\n<\/script>\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br")])]),t("p",[s._v("在浏览器直接访问 http://localhost:5050/index.html 即可进入表单页。")]),s._v(" "),t("h2",{attrs:{id:"_3、安装中间件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、安装中间件"}},[s._v("#")]),s._v(" 3、安装中间件")]),s._v(" "),t("p",[s._v("安装 koa-bodyparser 与 jsonwebtoken 中间件:")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("// koa-bodyparser用于获取post请求数据\ncnpm install koa-bodyparser --save\n\n// jsonwebtoken用于生成token\ncnpm install jsonwebtoken --save\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h5",{attrs:{id:"jwt"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jwt"}},[s._v("#")]),s._v(" JWT")]),s._v(" "),t("p",[s._v("在用户登录的路由中使用 jwt.sign 来生成token，一共定义三个参数，第一个是存入token的信息，第二个是token的钥匙，和config/passport.js的配置的钥匙相同，第三个是保存的时间，3600即一个小时，最后返回token，要在前面加Bearer:")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("const jwt = require('jsonwebtoken')\n\nconst token = jwt.sign({ myaccount: myaccount, mypwd: mypwd }, 'secret', { expiresIn: 3600 })\nlet obj = {\n  token,\n  msg: '登录成功'\n}\nresolve(obj)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h3",{attrs:{id:"_4、添加post接口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、添加post接口"}},[s._v("#")]),s._v(" 4、添加post接口")]),s._v(" "),t("p",[s._v("在 router/login.js 中加入：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("const bodyParser = require('koa-bodyparser')\n\nlogin.use(bodyParser());\n\nlogin.post('/register', async (ctx)=>{\n  console.log(ctx.request.body);\t\t// 可以打印得到数据\n\tctx.response.body = \"登录或注册\"\n})\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h3",{attrs:{id:"_5、登录与自动注册"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5、登录与自动注册"}},[s._v("#")]),s._v(" 5、登录与自动注册")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("const Router = require('koa-router')\nconst login = new Router()\nconst bodyParser = require('koa-bodyparser')\nconst db = require('../utils/db')\nconst jwt = require('jsonwebtoken')\n\nlogin.get('/', async (ctx) => {\n\tctx.response.body = \"登录页面\"\n})\n\nlogin.use(bodyParser());\n\nlogin.post('/register', async (ctx) => {\n\tlet myaccount = ctx.request.body.account;\n\tlet mypwd = ctx.request.body.pwd;\n\tlet sql = `SELECT * FROM users WHERE account='${myaccount}'`;\n\tlet result = await new Promise((resolve, reject) => {\n\t\treturn db.query(sql, (err, data) => {\n\t\t\tif (err) throw err;\n\t\t\tif (data.length > 0) {\n\t\t\t\tresolve(data);\n\t\t\t} else {\n\t\t\t\tresolve(false);\n\t\t\t}\n\t\t})\n\t})\n\tif (result) {\n\t\t// 能找到对应的账号\n\t\tif (result[0].pwd == mypwd) {\n\t\t\t// 账号密码正确，返回token\n\t\t\tctx.body = {\n\t\t\t\ttoken: result[0],\n\t\t\t\tmsg: '登录成功',\n\t\t\t\taccount: myaccount\n\t\t\t};\n\t\t} else {\n\t\t\t// 密码错误\n\t\t\tctx.body = {\n\t\t\t\tmsg: '密码错误',\n\t\t\t\taccount: myaccount\n\t\t\t};\n\t\t}\n\t} else {\n\t\t// 找不到对应的账号，直接插入一个\n\t\tlet result1 = await new Promise((resolve, reject) => {\n\t\t\t// 生成token\n\t\t\tconst token = jwt.sign({ myaccount: myaccount, mypwd: mypwd }, 'secret', { expiresIn: 3600 })\n\t\t\treturn db.query(`INSERT INTO users (account, pwd, token) values ('${myaccount}', '${mypwd}', '${token}')`, (error, datas) => {\n\t\t\t\tif (error) throw error;\n\t\t\t\t// 已插入数据，返回用户名与token\n\t\t\t\tlet obj = {\n\t\t\t\t\ttoken,\n\t\t\t\t\tmsg: '登录成功',\n\t\t\t\t\taccount: myaccount\n\t\t\t\t}\n\t\t\t\tresolve(obj)\n\t\t\t})\n\t\t})\n\t\tif (result1) {\n\t\t\tctx.body = result1;\n\t\t}\n\t}\n})\n\nmodule.exports = login;\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br")])]),t("p",[s._v("此时，前端做这个post请求后，就会得到相应的数据。")])])}),[],!1,null,null,null);n.default=e.exports}}]);